% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/collate.R
\name{collate_auto_wp}
\alias{collate_auto_wp}
\title{Collate Automated Water Potential Data with Metadata}
\usage{
collate_auto_wp(con = NULL, db_path = NULL, dataset_name = NULL)
}
\arguments{
\item{con}{A DBI database connection object. If NULL, will create a connection using db_path.}

\item{db_path}{Character string specifying the path to the DuckDB database file.
Only used if con is NULL. If both are NULL, an error is raised.}

\item{dataset_name}{Optional character vector of dataset names to filter results.
If NULL (default), returns data for all available datasets with automated water potential data.}
}
\value{
A data frame with automated water potential measurements joined with complete
metadata. Measurements are filtered to sensor deployment periods (between start_date
and end_date). Includes a logical SFN column indicating SAPFLUXNET membership.
}
\description{
Joins automated water potential measurements with study site, treatment, plot,
plant, and sensor metadata. This is the most complex collation function as it
handles sensor deployment periods and filters measurements to valid date ranges.
Includes treatment hierarchy logic and SAPFLUXNET flagging.
}
\details{
Plants without sensor_id assignments are excluded. Measurements with NA water
potential values are filtered out.
}
\examples{
\dontrun{
# Using database path
auto_data <- collate_auto_wp(db_path = "psinet.duckdb")

# Using existing connection
con <- DBI::dbConnect(duckdb::duckdb(), "psinet.duckdb")
auto_data <- collate_auto_wp(con = con)
DBI::dbDisconnect(con, shutdown = TRUE)

# Filter to specific datasets
auto_data <- collate_auto_wp(
  db_path = "psinet.duckdb",
  dataset_name = c("Smith_1", "Jones_2")
)
}
}
